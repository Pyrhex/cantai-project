{% extends 'base.html' %}

{% block content %}
    <style>
        .page-header { margin-bottom: 18px; }
        .subtle { color: #6c757d; font-size: 13px; margin-top: 4px; }
        .card { background: #fff; border: 1px solid #e9ecef; border-radius: 10px; padding: 16px; margin-bottom: 18px; }
        .card h3 { margin-top: 0; margin-bottom: 10px; }
        .field { margin-bottom: 12px; }
        .field label { display: block; font-weight: 600; margin-bottom: 6px; }
        .field input[type="text"], .field textarea {
            width: 100%; padding: 10px 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 14px;
        }
        .field textarea { resize: vertical; }
        .checkbox-row { display: inline-flex; align-items: center; gap: 10px; margin: 6px 0 2px; }
        .actions { margin-top: 12px; }
        .actions button { padding: 10px 16px; border-radius: 6px; font-weight: 600; }
        .signup-list { list-style: none; padding: 0; margin: 0; }
        .signup-item { padding: 12px; border: 1px solid #e9ecef; border-radius: 10px; background: #fafbfc; margin-bottom: 10px; }
        .signup-top { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
        .signup-name { font-weight: 700; font-size: 15px; color: #212529; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 999px; font-size: 12px; border: 1px solid #cfe2ff; background: #e9f5ff; color: #0b5ed7; }
        .badge.no { border-color: #e2e3e5; background: #f8f9fa; color: #6c757d; }
        .signup-notes { color: #495057; font-size: 13px; margin-top: 6px; white-space: pre-wrap; }
        @media (max-width: 600px) { .signup-top { flex-direction: column; align-items: flex-start; } }
    </style>

    <div class="page-header">
        <h2 style="margin: 0 0 6px 0;">Sign Up: {{ tournament.name }}</h2>
        {% if tournament.description %}
            <div class="subtle">{{ tournament.description }}</div>
        {% endif %}
        <div class="subtle">Date: {{ tournament.date }}</div>
    </div>

    {% if tournament.finalized %}
        <div class="card" style="border-color:#f5c2c7; background:#f8d7da; color:#842029;">
            Signups are closed. This tournament has been finalized.
        </div>
    {% else %}
        <div class="card">
            <h3>Quick Signup</h3>
            <form method="post" onsubmit="setTimeout(() => this.reset(), 0)">
                <div class="field">
                    <label for="name">Your Name</label>
                    <input id="name" name="name" type="text" placeholder="Enter your full name" required>
                </div>
                <div class="field">
                    <label class="checkbox-row">
                        <input type="checkbox" name="need_powercart">
                        Need a powercart
                    </label>
                </div>
                <div class="field">
                    <label for="notes">Notes (optional)</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="Any notes or requests..."></textarea>
                </div>
                <div class="actions">
                    <button type="submit">Sign Up</button>
                </div>
            </form>
            <div class="subtle">After submitting, youâ€™ll see a confirmation above and the form will clear.</div>
        </div>
    {% endif %}

    <div class="card" style="margin-top: 8px;">
        <h3>Current Signups ({{ signups|length if signups else 0 }})</h3>
        {% if signups and signups|length > 0 %}
            <ul class="signup-list">
                {% for s in signups %}
                <li class="signup-item">
                    <div class="signup-top">
                        <div class="signup-name">{{ s.name }}</div>
                        {% if s.need_powercart %}
                        <div>
                            <span class="badge">Needs powercart</span>
                        </div>
                        {% endif %}
                    </div>
                    {% if s.notes %}
                    <div class="signup-notes">Notes: {{ s.notes }}</div>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="subtle">No signups yet.</div>
        {% endif %}
    </div>

    <!-- No navigation links on public signup page to keep users within this view -->
{% endblock %}
